<!doctype html>
<html lang="el">
<head>
  <meta charset="utf-8" />
  <title>Συλλογή Μπαλών — A-Frame Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <style>
    html, body { height: 100%; margin: 0; background: #111; color: #fff; font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; }
    a-scene { width: 100%; height: 100vh; display: block; }
    #hud {
      position: absolute;
      left: 12px;
      top: 12px;
      z-index: 999;
      background: rgba(0,0,0,0.5);
      padding: 10px 14px;
      border-radius: 8px;
      font-size: 14px;
    }
    #hud b { font-size:16px; }
  </style>
</head>
<body>
  <div id="hud">
    <div><b>Μπάλες απομένουν:</b> <span id="remaining">15</span> / 15</div>
  </div>

  <a-scene background="color: #e6d9c9" shadow="type: pcfsoft">
    <a-assets>
      <audio id="tickSound" src="assets/tick.mp3"></audio>
    </a-assets>

    <a-entity light="type: ambient; intensity: 0.6"></a-entity>
    <a-entity light="type: directional; intensity: 0.9; castShadow: true" position="-2 4 2"></a-entity>

    <a-plane rotation="-90 0 0" width="8" height="6" color="#a9a9a9" shadow="receive: true"></a-plane>
    <a-plane rotation="-90 0 0" width="4" height="3" color="#013220" position="0 0.01 0" shadow="receive: true"></a-plane>

    <a-box position="-4 1 0" depth="6" height="2.5" width="0.2" color="#d2c4b0" shadow="cast: true; receive: true"></a-box>
    <a-box position="4 1 0" depth="6" height="2.5" width="0.2" color="#d2c4b0" shadow="cast: true; receive: true"></a-box>
    <a-box position="0 1 -3" depth="0.2" height="2.5" width="8" color="#d2c4b0" shadow="cast: true; receive: true"></a-box>
    <a-box position="0 1 3" depth="0.2" height="2.5" width="8" color="#d2c4b0" shadow="cast: true; receive: true"></a-box>

    <a-box id="bed" class="obstacle" position="-3.1 0.3 -1" width="2.2" height="0.6" depth="1.8" color="#c0d7c7" shadow="cast: true; receive: true"></a-box>
    <a-cylinder id="bin" class="obstacle" position="1.6 0.2 2.7" radius="0.18" height="0.4" color="#9e9e9e" shadow="cast: true; receive: true"></a-cylinder>
    <a-box id="desk" class="obstacle" position="2.3 0.4 -1.9" width="1.6" height="0.8" depth="0.6" color="#b08a60" shadow="cast: true; receive: true"></a-box>
    <a-box id="chair" class="obstacle" position="2.3 0.35 -1.1" width="0.5" height="0.7" depth="0.5" color="#3b3b3b" shadow="cast: true; receive: true"></a-box>

    <a-circle id="blackCircle" position="0 0.02 0" rotation="-90 0 0" radius="0.6" color="#000000" visible="false" shadow="receive: true"></a-circle>

    <a-entity id="cameraRig" position="0 1.6 2.5">
      <a-entity camera wasd-controls="acceleration: 30" look-controls>
        <a-entity id="cursor" cursor="rayOrigin: mouse"
                  raycaster="objects: .ball"
                  geometry="primitive: ring; radiusInner: 0.007; radiusOuter: 0.012"
                  material="shader: flat; color: #fff"
                  position="0 0 -0.5"></a-entity>
      </a-entity>
    </a-entity>

    <a-entity id="soundPlayer" sound="src: #tickSound; autoplay: false"></a-entity>
    <a-entity id="ballsRoot"></a-entity>
  </a-scene>

  <script>
    const TOTAL_BALLS = 15;
    const BALL_APPEAR_DELAY_MS = 5000;
    const BALL_INTERVAL_MS = 300;
    const SPAWN_BOUNDS = {xMin: -2.5, xMax: 2.5, zMin: -2.5, zMax: 2.5, yMin: 0.5, yMax: 2.3};
    const obstacles = [
      {x:-3.1, y:0.3, z:-1, w:2.2, h:0.6, d:1.8},
      {x:2.3, y:0.4, z:-1.9, w:1.6, h:0.8, d:0.6},
      {x:2.3, y:0.35, z:-1.1, w:0.5, h:0.7, d:0.5},
      {x:1.6, y:0.2, z:2.7, w:0.4, h:0.4, d:0.4}
    ];
    function insideObstacle(x,y,z) {
      return obstacles.some(o => {
        const xMin = o.x - o.w/2, xMax = o.x + o.w/2;
        const yMin = 0, yMax = o.y + o.h/2;
        const zMin = o.z - o.d/2, zMax = o.z + o.d/2;
        return (x > xMin && x < xMax && y > yMin && y < yMax && z > zMin && z < zMax);
      });
    }
    document.addEventListener('DOMContentLoaded', () => {
      const ballsRoot = document.getElementById('ballsRoot');
      const soundPlayer = document.getElementById('soundPlayer');
      const remainingEl = document.getElementById('remaining');
      const blackCircle = document.getElementById('blackCircle');
      const cursor = document.querySelector('#cursor');
      let remaining = TOTAL_BALLS;
      remainingEl.textContent = remaining;
      function randomInRange(min, max) { return Math.random() * (max - min) + min; }
      function spawnOneBall() {
        let x, y, z, attempts = 0;
        do {
          x = randomInRange(SPAWN_BOUNDS.xMin, SPAWN_BOUNDS.xMax);
          y = randomInRange(SPAWN_BOUNDS.yMin, SPAWN_BOUNDS.yMax);
          z = randomInRange(SPAWN_BOUNDS.zMin, SPAWN_BOUNDS.zMax);
          attempts++;
          if (attempts > 100) break;
        } while (insideObstacle(x,y,z));
        const sp = document.createElement('a-sphere');
        sp.setAttribute('radius', 0.12);
        sp.setAttribute('class', 'ball');
        sp.setAttribute('material', 'color: #ffec3d; shader: standard; emissive: #ffec3d; emissiveIntensity: 1');
        sp.setAttribute('position', `${x} ${y} ${z}`);
        sp.setAttribute('shadow', 'cast: true; receive: true');
        sp.setAttribute('animation__float', `property: position; dir: alternate; dur: 1500; loop: true; to: ${x} ${y+0.2} ${z}`);
        ballsRoot.appendChild(sp);
      }
      function collectBall(el) {
        if (!el || el.dataset.collected) return;
        el.dataset.collected = '1';
        soundPlayer.components.sound.playSound();
        el.parentNode.removeChild(el);
        remaining = Math.max(0, remaining - 1);
        remainingEl.textContent = remaining;
        if (remaining === 0) {
          blackCircle.setAttribute('visible', 'true');
        }
      }
      setTimeout(()=> {
        let spawned = 0;
        const interval = setInterval(()=> {
          if (spawned >= TOTAL_BALLS) { clearInterval(interval); return; }
          spawnOneBall();
          spawned++;
        }, BALL_INTERVAL_MS);
      }, BALL_APPEAR_DELAY_MS);
      window.addEventListener('click', () => {
        const intersections = cursor.components.raycaster.intersections;
        if (intersections.length > 0) {
          const hit = intersections[0].object.el;
          if (hit && hit.classList.contains('ball')) {
            collectBall(hit);
          }
        }
      });
    });
  </script>
</body>
</html>













         


