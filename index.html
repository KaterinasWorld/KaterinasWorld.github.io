<!doctype html>
<html lang="el">
<head>
  <meta charset="utf-8" />
  <title>Συλλογή Αστεριών — A-Frame Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <style>
    html, body { height: 100%; margin: 0; background: #111; color: #fff; font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; }
    a-scene { width: 100%; height: 100vh; display: block; }
    #hud {
      position: absolute;
      left: 12px;
      top: 12px;
      z-index: 999;
      background: rgba(0,0,0,0.5);
      padding: 10px 14px;
      border-radius: 8px;
      font-size: 14px;
    }
    #hud b { font-size:16px; }
  </style>
</head>
<body>
  <div id="hud">
    <div><b>Αστέρια απομένουν:</b> <span id="remaining">15</span> / 15</div>
  </div>

  <a-scene background="color: #e6d9c9">
    <a-assets>
      <audio id="tickSound" src="assets/tick.mp3"></audio>
    </a-assets>

    <a-entity light="type: ambient; intensity: 0.7"></a-entity>
    <a-entity light="type: directional; intensity: 0.8" position="-1 3 1"></a-entity>
    <a-plane rotation="-90 0 0" width="8" height="6" color="#dfe7dd"></a-plane>

    <a-box position="-4 1 0" depth="6" height="2.5" width="0.2" color="#d2c4b0"></a-box>
    <a-box position="4 1 0" depth="6" height="2.5" width="0.2" color="#d2c4b0"></a-box>
    <a-box position="0 1 -3" depth="0.2" height="2.5" width="8" color="#d2c4b0"></a-box>
    <a-box position="0 1 3" depth="0.2" height="2.5" width="8" color="#d2c4b0"></a-box>

    <a-box id="bed" class="obstacle" position="-3.1 0.35 -1" width="2.2" height="0.6" depth="1.8" color="#c0d7c7"></a-box>

    <a-plane position="-3.0 1.45 -0.99" width="0.9" height="0.6" color="#f0e7d8"></a-plane>
    <a-plane position="-3.01 1.45 -0.98" width="0.7" height="0.4" color="#222" material="opacity:0.6"></a-plane>

    <a-cylinder id="bin" class="obstacle" position="1.6 0.2 2.7" radius="0.18" height="0.4" color="#9e9e9e"></a-cylinder>
    <a-box id="desk" class="obstacle" position="2.3 0.6 -1.9" width="1.6" height="0.8" depth="0.6" color="#b08a60"></a-box>
    <a-box id="chair" class="obstacle" position="2.3 0.35 -1.1" width="0.5" height="0.7" depth="0.5" color="#3b3b3b"></a-box>

    <a-plane id="door" position="0 1 -3.09" width="1.2" height="2" color="#4b2e1f" material="side: double"></a-plane>
    <a-plane id="voidBehind" position="0 1 -3.11" width="1.2" height="2" color="#000000" visible="false"></a-plane>

    <a-entity id="cameraRig" position="0 1.6 2.5">
      <a-entity camera wasd-controls="acceleration: 30" look-controls>
        <a-entity id="cursor" cursor="rayOrigin: mouse"
                  raycaster="objects: .star"
                  geometry="primitive: ring; radiusInner: 0.007; radiusOuter: 0.012"
                  material="shader: flat; color: #fff"
                  position="0 0 -0.5"></a-entity>
      </a-entity>
    </a-entity>

    <a-entity id="soundPlayer" sound="src: #tickSound; autoplay: false"></a-entity>
    <a-entity id="starsRoot"></a-entity>
  </a-scene>

  <script>
    const TOTAL_STARS = 15;
    const STAR_APPEAR_DELAY_MS = 5000;
    const STAR_INTERVAL_MS = 300;
    const SPAWN_BOUNDS = {xMin: -2.5, xMax: 2.5, zMin: -2.6, zMax: 2.6, yMin: 0.5, yMax: 2.3};

    document.addEventListener('DOMContentLoaded', () => {
      const starsRoot = document.getElementById('starsRoot');
      const soundPlayer = document.getElementById('soundPlayer');
      const remainingEl = document.getElementById('remaining');
      const door = document.getElementById('door');
      const voidBehind = document.getElementById('voidBehind');
      const cursor = document.querySelector('#cursor');

      let remaining = TOTAL_STARS;
      remainingEl.textContent = remaining;

      function randomInRange(min, max) { return Math.random() * (max - min) + min; }

      function spawnOneStar() {
        const sp = document.createElement('a-sphere');
        sp.setAttribute('radius', 0.12);
        sp.setAttribute('class', 'star');
        sp.setAttribute('material', 'color: #ffec3d; shader: standard; emissive: #ffec3d; emissiveIntensity: 1');

        const x = randomInRange(SPAWN_BOUNDS.xMin, SPAWN_BOUNDS.xMax);
        const y = randomInRange(SPAWN_BOUNDS.yMin, SPAWN_BOUNDS.yMax);
        const z = randomInRange(SPAWN_BOUNDS.zMin, SPAWN_BOUNDS.zMax);

        sp.setAttribute('position', `${x} ${y} ${z}`);
        sp.setAttribute('animation__float', `property: position; dir: alternate; dur: 1500; loop: true; to: ${x} ${y+0.2} ${z}`);

        starsRoot.appendChild(sp);
      }

      function collectStar(el) {
        if (!el || el.dataset.collected) return;
        el.dataset.collected = '1';
        soundPlayer.components.sound.playSound();
        el.parentNode.removeChild(el);
        remaining = Math.max(0, remaining - 1);
        remainingEl.textContent = remaining;
        if (remaining === 0) {
          door.setAttribute('animation__open', 'property: rotation; to: 0 -90 0; dur: 900; easing: easeInOutQuad');
          voidBehind.setAttribute('visible', 'true');
        }
      }

      setTimeout(()=> {
        let spawned = 0;
        const interval = setInterval(()=> {
          if (spawned >= TOTAL_STARS) { clearInterval(interval); return; }
          spawnOneStar();
          spawned++;
        }, STAR_INTERVAL_MS);
      }, STAR_APPEAR_DELAY_MS);

      window.addEventListener('contextmenu', e => {
        e.preventDefault();
        const intersections = cursor.components.raycaster.intersections;
        if (intersections.length > 0) {
          const hit = intersections[0].object.el;
          if (hit && hit.classList.contains('star')) {
            collectStar(hit);
          }
        }
      });
    });
  </script>
</body>
</html>



         


